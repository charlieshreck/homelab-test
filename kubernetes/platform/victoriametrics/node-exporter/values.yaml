# Node Exporter - Host Metrics from All Nodes
# Chart: prometheus-node-exporter from prometheus-community/prometheus-node-exporter

# Resource limits (runs on every node)
resources:
  requests:
    cpu: 50m
    memory: 32Mi
  limits:
    cpu: 200m
    memory: 64Mi

# Prometheus annotations for vmagent discovery
prometheus:
  monitor:
    enabled: false  # Using annotations instead

# Service configuration
service:
  type: ClusterIP
  port: 9100
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "9100"

# Host mounts for metrics collection
hostNetwork: true
hostPID: true
hostRootFsMount:
  enabled: true
  mountPropagation: HostToContainer

# RBAC
rbac:
  create: true

# Service Account
serviceAccount:
  create: true
  name: node-exporter

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 65534
  fsGroup: 65534

# Tolerations to run on all nodes including control plane
tolerations:
  - effect: NoSchedule
    operator: Exists
